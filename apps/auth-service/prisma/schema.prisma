
generator client {
  provider = "prisma-client"
}

datasource db {
  provider = "postgresql"
}



model UserCredentials {
  id           String   @id @default(uuid()) @db.Uuid
  email        String   @unique
  displayName  String
  password String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("user_credentials")
}

model RefreshToken {
  id        String   @id @default(uuid()) @db.Uuid
  tokenId   String   @default(uuid()) @db.Uuid
  expiresAt DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Foreign Key
  userId    String   @db.Uuid
  
  // Relation definition
  // onDelete: Cascade means if a user is deleted, their tokens are too
  user      UserCredentials @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("refresh_tokens")
}